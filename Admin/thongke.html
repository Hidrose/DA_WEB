<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="./assets/css/style.css" type="text/css" />
    <link rel="stylesheet" href="./assets/css/product.css" />
    <link rel="stylesheet" href="./assets/css/order.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="./bootstrap/css/bootstrap.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>Thống kê đơn hàng</title>
  </head>
  <body>
    <script type="text/javascript" src="./bootstrap/js/bootstrap.js"></script>
    <script src="./assets/js/order.js"></script>
    <script src="./main.js"></script>
    <script src="./assets/js/fix_delete.js"></script>
    <div id="mySidenav" class="sidenav">
      <div class="head-logo">
        <p class="logo"><span>T</span>eam-15</p>
      </div>

      <a href="index.html" class="icon-a"
        ><i class="fa fa-dashboard icons"></i> Trang chủ</a
      >
      <a href="./user.html" class="icon-a"
        ><i class="fa fa-users icons"></i> Người dùng</a
      >
      <a href="./product.html" class="icon-a"
        ><i class="fa fa-list icons"></i> Sản phẩm
      </a>
      <a href="./donhang.html" class="icon-a"
        ><i class="fa fa-shopping-bag icons"></i> Đơn hàng</a
      >
    </div>
    <div id="main">
      <div class="head">
        <div class="col-div-6">
          <span
            style="font-size: 25px; cursor: pointer; color: black"
            class="nav"
            >☰ Yêu cầu
          </span>
          <span
            style="font-size: 25px; cursor: pointer; color: #000000"
            class="nav2"
            >☰ Yêu cầu
          </span>
          <p style="font-size: 20px; opacity: 0.5">Thống kê đơn hàng</p>
        </div>

        <div class="col-div-6">
          <div class="profile">
            <a href="javascript:void(0)"
              ><img
                style="width: 30px"
                src="./assets/img/avata.png"
                class="pro-img"
            /></a>
            <p style="color: black">Admin</p>
            <div class="dropdown-content">
              <a style="color: black" href="#">Cài đặt</a>
              <a style="color: black" href="loginAdmin.html">Đăng xuất</a>
            </div>
          </div>
        </div>
        <div class="clearfix"></div>
      </div>

      <div class="container">
        <h2>Thống kê kinh doanh</h2>

        <label for="product">Chọn loại sản phẩm:</label>
        <select id="product">
          <!-- Thêm các tùy chọn sản phẩm từ cơ sở dữ liệu hoặc cách khác -->
          <option value="product1">Sen đá</option>
          <option value="product2">Cây trong nhà</option>
          <option value="product3">Cây ngoài trời</option>
          <!-- ... -->
        </select>

        <label for="startDate">Từ ngày:</label>
        <input type="date" id="startDate" />

        <label for="endDate">Đến ngày:</label>
        <input type="date" id="endDate" />

        <button onclick="thongKe()">Thống kê</button><br />
        <br />

        <div id="result"></div>
      </div>

      <table id="stats-table">
        <!-- Stats will be inserted here -->
      </table>

      <div class="clearfix"></div>
      <br />
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        $(".nav").click(function () {
          // ... (mã hiện tại) ...
        });

        $(".nav2").click(function () {
          // ... (mã hiện tại) ...
        });
      });

      function thongKe() {
        console.log("Thống kê button clicked");

        // Sample data (replace this with your actual data fetching logic)
        const data = {
          product1: [
            { name: "Sen đá kim cương", quantity: 20 },
            { name: "Sen đá phật bà", quantity: 15 },
            { name: "Sen đá nâu", quantity: 10 },
          ],
          product2: [
            { name: "Cây lưỡi hổ", quantity: 25 },
            { name: "Cây trầu bà", quantity: 18 },
            { name: "Cây thủy sinh", quantity: 12 },
          ],
          product3: [
            { name: "Cây hoa lan hoàng dương", quantity: 30 },
            { name: "Cây hoa giấy Sakura", quantity: 22 },
            { name: "Cây hoa hồng phụng", quantity: 15 },
          ],
        };

        // Get selected product type
        const selectedProduct = $("#product").val();

        // Get start and end dates (you might want to validate and format these)
        const startDate = $("#startDate").val();
        const endDate = $("#endDate").val();

        // Filter data based on the selected product and date range
        const filteredData = data[selectedProduct];

        // Sort the filtered data by quantity (descending order)
        filteredData.sort((a, b) => b.quantity - a.quantity);

        // Create and populate the table
        let table =
          "<table><tr><th>Xếp hạng</th><th>Tên sản phẩm</th><th>Số lượng bán ra</th></tr>";
        filteredData.forEach((product, index) => {
          table += `<tr><td>${index + 1}</td><td>${product.name}</td><td>${
            product.quantity
          }</td></tr>`;
        });
        table += "</table>";

        // Display the table in the result div
        $("#result").html(table);
      }
    </script>
    <script>
      $(".nav").click(function () {
        $("#mySidenav").css("width", "70px");
        $("#main").css("margin-left", "70px");
        $(".logo").css("visibility", "hidden");
        $(".logo span").css("visibility", "visible");
        $(".logo span").css("margin-left", "-10px");
        $(".icon-a").css("visibility", "hidden");
        $(".icons").css("visibility", "visible");
        $(".icons").css("margin-left", "-8px");
        $(".nav").css("display", "none");
        $(".nav2").css("display", "block");
      });

      $(".nav2").click(function () {
        $("#mySidenav").css("width", "300px");
        $("#main").css("margin-left", "300px");
        $(".logo").css("visibility", "visible");
        $(".icon-a").css("visibility", "visible");
        $(".icons").css("visibility", "visible");
        $(".nav").css("display", "block");
        $(".nav2").css("display", "none");
      });
    </script>
  </body>
</html>
